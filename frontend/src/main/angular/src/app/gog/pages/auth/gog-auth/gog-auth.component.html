<app-loaded-content [isLoading]="gogIsLoading">
  <div class="card mt-3">
    <div class="card-body">
      <h2 class="card-title">GOG</h2>
      <p data-testid="gog-auth-status">
        <span class="badge"
              [ngClass]="{'bg-success': gogAuthenticated, 'bg-danger': !gogAuthenticated}">
          <i class="me-1"
             [ngClass]="{'bi bi-check-circle': gogAuthenticated, 'bi bi-x-circle': !gogAuthenticated}"
             aria-hidden="true">
          </i>

          <ng-container *ngIf="gogAuthenticated">Authenticated</ng-container>
          <ng-container *ngIf="!gogAuthenticated">Not authenticated</ng-container>
        </span>
      </p>

      <ol *ngIf="!gogAuthenticated">
        <form [formGroup]="gogAuthForm" (ngSubmit)="authenticateGog()">
          <li>
            <p>Press the button below to log in to GOG:</p>
            <p>
              <app-button [action]="showGogAuthPopup"
                          buttonType="button" testId="log-in-to-gog-btn" buttonStyle="primary">
                Log in to GOG
              </app-button>
            </p>
          </li>
          <li>
            <p>Copy the URL you're redirected to and paste it below:</p>
            <p>
              <label for="urlInput" class="form-label">URL</label>
              <input data-testid="gog-code-url-input" type="text" class="form-control" id="urlInput" placeholder="URL"
                     formControlName="gogCodeUrl">
            </p>
          </li>
          <li>
            <p>Press the button below:</p>
            <p>
              <app-button buttonType="submit" testId="gog-authenticate-btn" buttonStyle="primary">
                Authenticate
              </app-button>
            </p>
          </li>
        </form>
      </ol>

      <div *ngIf="gogAuthenticated">
        <app-button [actionAsync]="signOutGog" buttonStyle="danger">Log out</app-button>
      </div>
    </div>
  </div>
</app-loaded-content>
